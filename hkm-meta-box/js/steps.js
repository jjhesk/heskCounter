/*!
 * Update datetime picker element
 * Used for static & dynamic added elements (when clone)
 */
var steps={update:function(){var a=jQuery;a(".stepsbox").each(function(d){var c=a(this).find(".twostepcombo");var b=c.attr("name");if(b.indexOf("[")>0){b=b.substring(0,b.indexOf("["))+"["+d+"]"}else{b=b+"["+d+"]"}c.attr("name",b)});a(".stepsbox").last().step2box()},ini2:function(){var b=this,c=jQuery,d=[],a;c(".stepsbox").each(function(g){var f=c(this).find(".twostepcombo");var e=f.attr("name");f.attr("name",b.rename2Array(e,g));c(this).step2box()})},rename2Array:function(b,c){var a="";if(b.indexOf("[")>0){a=b.substring(0,b.indexOf("["))+"["+c+"]"}else{a=b+"["+c+"]"}return a}};jQuery.fn.step2box=step2stepfunction;function step2stepfunction(){var a=jQuery;var i=this;var d=i.find(".step1.combobox:not(.select2-container)");var j=d.attr("id");if(j.substring(0,5)=="s2id_"){j=j.substring(5)}var f=window["twosteps_"+j];var k=window["twosteps_options_"+j];var g={};var b=i.find(".twostepcombo").val();var c=i.find(".step2.combobox:not(.select2-container)");i.find(".combobox:not(.select2-container)").removeAttr("name");if(b!=""){g=JSON.parse(b)}else{i.find(".select2-container.combobox").remove()}d.select2({showSearchBox:false,placeholder:k.step1,minimumResultsForSearch:-1}).on("change",function(){var n=a(this).val();var l=a(this).nextMatchNaive(".step2.section_step_hkm");l.removeClass("hidden");g.key_1=n;a(this).parent().find(".twostepcombo").val(JSON.stringify(g));var m=c.select2({placeholder:k.step2,data:f[n],initSelection:function(o,q){var p=_.select(f[n],function(r){return r.id==o.val()});q(p[0])}}).on("change",function(){var o=a(this).val();g.key_2=o;a(this).parent().find(".twostepcombo").val(JSON.stringify(g))})});if(b!=""){if(g.hasOwnProperty("key_1")){var e=d.select2("val",g.key_1).trigger("change");var h=i.find(".step2.combobox.select2-container");if(g.hasOwnProperty("key_2")&&h.size()>0){if(g.key_2!=""){h.select2("val",g.key_2).trigger("change")}}}}else{d.trigger("change")}}jQuery.fn.nextMatchNaive=nextMatchNaive;function nextMatchNaive(a){var b;b=this.next();while(b.length>0&&!b.is(a)){b=b.next()}return b}jQuery.fn.input_save_data=input_field_data;function input_field_data(a){this.val(JSON.stringify(a))}jQuery(document).ready(function(a){steps.ini2()});